<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap Link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- css link -->
    <link rel="stylesheet" href="css/login.css">
    <link rel="shortcut icon" href="./Images/Logo.png" type="image/x-icon">
    <title>Login</title>

</head>

<body>
    <div class="container-fluid a b">
        <h1 class="text-center text-light" style="font-size: 7vh; padding: 2px 0;"><b style="font-weight: 400;">WELCOME
                TO UNIVERSITY PORTAL</b> </h1>
        <hr class="text-light">
        <br>
        <div class="row mt-5">
            <div class="col-md-3"></div>
            <div class="col-md-6 wrapper">
                <h3 class="text-center">LOGIN</h3>
                <!-- success msg -->
                <% if (message.length> 0) { %>
                    <div class="alert alert-success">
                        <%= message %>
                    </div>
                    <% } %>

                        <!-- error msg -->
                        <% if (msg.length> 0) { %>
                            <div class="alert alert-danger">
                                <%= msg %>
                            </div>
                            <% } %>

                                <form action="/verifyLogin" method="post">
                                    <div class="input-box">
                                        <input name="email" type="email" name="username" placeholder="E-mail" required>
                                        <i class='bx bxs-user'></i>
                                    </div>
                                    <div class="input-box">
                                        <input name="password" type="password" name="password" placeholder="Password"
                                            required>
                                        <i class='bx bxs-lock-alt'></i>
                                    </div>
                                    <div class="remember-forgot">
                                        <label><input type="checkbox"> Remember me </label>
                                        <a href="#" data-bs-toggle="modal" data-bs-target="#Forgot"
                                            class="btn-primary">Forgot Password?</a>
                                    </div>
                                    <button type="submit" class="btn">Login</button>
                                    <div class="register-link">
                                        <p>Don't have an account?
                                            <a href="/register" target="_blank" class="btn-dark">Register</a>
                                        </p>
                                    </div>
                                </form>
                                <div class="col-md-2"></div>
            </div>
            <div class="col-md-3"></div>
        </div>
    </div>
    <!--Forgot Password -->
    <div class="modal fade" id="Forgot" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5 " id="exampleModalLabel">Forget Password</h1>

                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <form action="/forgot_Password" method="post">


                        <div class="mb-3">
                            <label for="">Email</label>
                            <input type="text" name="email" class="form-control">
                        </div>

                        <center>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </center>
                    </form>
                </div>

            </div>
        </div>
    </div>
    <!--End Forgot Password Modal -->

    <!-- JavaScript Link -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script>
        // Live server script (optional, if needed)
        if ('WebSocket' in window) {
            (function () {
                function refreshCSS() {
                    var sheets = [].slice.call(document.getElementsByTagName("link"));
                    var head = document.getElementsByTagName("head")[0];
                    for (var i = 0; i < sheets.length; ++i) {
                        var elem = sheets[i];
                        var parent = elem.parentElement || head;
                        parent.removeChild(elem);
                        var rel = elem.rel;
                        if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
                            var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
                            elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
                        }
                        parent.appendChild(elem);
                    }
                }
                var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
                var address = protocol + window.location.host + window.location.pathname + '/ws';
                var socket = new WebSocket(address);
                socket.onmessage = function (msg) {
                    if (msg.data == 'reload') window.location.reload();
                    else if (msg.data == 'refreshcss') refreshCSS();
                };
                if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
                    console.log('Live reload enabled.');
                    sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
                }
            })();
        }
        else {
            console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
        }
    </script>
</body>

</html>